---
import Layout from "@/layouts/Layout.astro";
---

<Layout title="PoliclÃ­nico La Trinidad | Resultados de laboratorio">
    <main>
        <div id="txt"></div>
        <script>
            const apiUrl = import.meta.env.API_URL;
            document.addEventListener("astro:page-load", () => {
                fetch(`${apiUrl}/farmacos`)
                .then((response) => {
                    if(response.ok){
                        response.text().then((msg) => {
                            let nice = msg;
                            const division = document.getElementById("txt");
                            if(division !== null)
                                division.innerHTML += nice;
                        });
                    } else {
                        alert("HTTP response not OK");
                    }
                })
                .catch((err) => {
                    alert(`Error trying to fetch response from the server: ${err.message}`);
                })
            });
        </script>
    </main>
</Layout>